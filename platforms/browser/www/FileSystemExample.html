<!DOCTYPE HTML>
<html>
  <head>
    <title>Test</title>
	<script src="cordova.js"></script>
	<script src="js/filesystem.js"></script>
    <script type="text/javascript" charset="utf-8">
	//start request after the device is ready
	document.addEventListener("deviceready", requestFS, false);	
	
	function onLoadFunction(){ // called on load
		console.log("DIRENtry");
		console.log(filesystem);
		listFiles();
		setDirectory("UserData");	
	}
	function afterSetDirectory() { // called when directory is set
		listFiles();
		saveFile("testfile1", "this is the content");
	}
	function saveFileSuccess(filename) { // called when saved file success 
		console.log("saveFileSuccess");
		listFiles();
		loadFile(filename);		
	}
	function loadFileSuccess(filename, content) { //called when load file success
		deleteFile(filename)
		console.log(content);
	}
	function deleteFileSuccess() { //called when file is deleted
		console.log("deleteFileSuccess");
		listFiles();
	}
	function displayEntries(entries) { //called when listfiles is success
		var waitDir = [];
		console.log("listfiles");
		console.log(entries);
		entries.forEach(function(entry, i) {
			if(!entry.isFile) waitDir.push(entry.name);	//儲存目錄
			else {
				//列出檔案
				console.log(entry.isFile)	//此entry是否為檔案
				console.log(entry.name)	//取得名稱
				console.log(entry.toURL())	//取得位置
				//$("#fileList").append("<li><a onClick=\"#\"><h3>"+entry.name+"</h3><p>"+entry.toURL()+"</p></li>");
			}
		});
		if(waitDir.length != 0) {	//有目錄未讀取
			dir = waitDir.pop();	//取出未讀取目錄
			setDirectory(dir);	//指定檔案目錄
		}
		else {
			//結束讀取檔案清單
			//$("#fileList").listview('refresh');
		}
	}
    </script>
  </script>
  </head>
  <body>
    <h1>Example</h1>
  </body>
</html>