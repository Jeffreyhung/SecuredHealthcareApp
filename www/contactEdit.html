<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Contact</title>
		<meta name="viewport" content="initial-scale=1, maximum-scale=1">
		<script src="js/ratchet.js"></script>
		<link href="css/ratchet.css" rel="stylesheet">
		<link href="css/fontawesome.css" rel="stylesheet">
		<link href="css/sidebar.css" rel="stylesheet">
		<script src="cordova.js"></script>
		<script src="js/filesystem.js"></script>
		<script type="text/javascript">
			var userinfo;
			document.addEventListener("deviceready", requestFS, false);	
			
			function onLoadFunction(){ // called on load
				setDirectory("UserData");	
			}
			function afterSetDirectory(){
			}			
			function submit(){
				hash(document.getElementById('password').value, document.getElementById('email').value);
			}
			function hash(password, somesalt){
				var hashresult;
				argon2.hash({ pass: password, salt: somesalt })
				.then(h => {
					hashresult = h.hashHex;
					userinfo = '{ "email":"'+ somesalt + '" , "password":"' + password + '"}';
					saveFile("session", hashresult);
					saveFile("userinfo", userinfo);
				})
				.catch(e => console.error(e.message, e.code))
			}
			function saveFileSuccess() {
				location.replace("home.html");
			}
		</script>
	</head>
	<body>

    <!-- Make sure all your bars are the first things in your <body> -->
		<header class="bar bar-nav">
			<a class="icon icon-bars pull-left" onclick="SBtrigger()"></a>
			<h1 class="title"><b>Emergency Contact<b></h1>
		</header>
		<div id="Sidebar" class="sidebar">
			<a href="setting.html"><i class="fas fa-cog"></i>&nbsp &nbsp Setting</a>
			<a href="support.html"><i class="fas fa-headset"></i>&nbsp &nbsp Support</a>
			<a href="#"><i class="fas fa-sign-out-alt"></i>&nbsp &nbsp Sign-out</a>
		</div>

		<!-- Wrap all non-bar HTML in the .content div (this is actually what scrolls) -->
		<div class="content" id="main">
			<div class="card">
				<form class="input-group" action="submit">
					<ul class="table-view">
						<li class="table-view-cell table-view-divider">User Info</li>
						<li class="input-row">
							<label>Name: </label>
							<input type="text" placeholder="Full Name">
						</li>
						<li class="input-row">
							<label>D.o.B. : </label>
							<input type="date">
						</li>
						<li class="input-row">
							<label>Blood type:</label>
							<label><select style="width:100%;">
							  <option value="volvo">Volvo</option>
							  <option value="saab">Saab</option>
							  <option value="opel">Opel</option>
							  <option value="audi">Audi</option>
							</select></label>
						</li>
						<li class="input-row">
							<label>Weight: </label>
							<input type="text" placeholder="">
						</li>
						<li class="input-row">
							<label>Height: </label>
							<input type="text" placeholder="">
						</li>
						<li class="input-row">
							<label>Allergies: </label>
							<input type="text" placeholder="">
						</li>
						<li class="table-view-cell table-view-divider">Emergency Contact</li>
						<li class="input-row">
							<label>Name: </label>
							<input type="text" placeholder="">
						</li>
						<li class="input-row">
							<label>Phone: </label>
							<input type="text" placeholder="">
						</li>
					</ul>
				</form>
			</div>
		</div>
		
		<nav class="bar bar-tab">
			<a class="tab-item" href="health.html">
				<i class="fas fa-hospital"></i>
			</a>
			<a class="tab-item" href="medical.html">
				<i class="fas fa-pills"></i>
			</a>
			<a class="tab-item " href="#">
				<i class="fas fa-plus"></i>
			</a>
			<a class="tab-item" href="insurance.html">
				<i class="fas fa-money-check"></i>
			</a>
			<a class="tab-item active" href="contact.html" >
				<i class="fas fa-address-book"></i>
			</a>
		</nav>
		<script>
			function SBtrigger() {
				var sb = document.getElementById("Sidebar");
				if (sb.style.width == '150px') {
					document.getElementById("Sidebar").style.width = "0";
					//document.getElementById("main").style.marginLeft= "0";
				} else {
					document.getElementById("Sidebar").style.width = "150px";
					//document.getElementById("main").style.marginLeft = "150px";
				}
			}
		</script>
	</body>
</html>